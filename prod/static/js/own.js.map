{"version":3,"sources":["common.js"],"names":["qs","query","arguments","length","undefined","document","querySelector","qsAll","querySelectorAll","getParent","el","findParent","parentNode","classList","contains","window","onload","add","navigator","userAgent","match","addEventListener","event","site","form","init","_th","this","forms","fieldPhones","formElems","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","phoneItem","value","$","mask","err","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop","formElem","remove","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","checkForm","preventDefault","checkResult","find","removeClass","each","data","test","val","addClass","is","parents","trim","obj","fadeOut","selector","duration","cb","element","op","String","timer","setInterval","clearInterval","style","display","opacity","filter","fadeIn","type","typeBlock","burger","e","anim","elArray","elemsAnimArr","forEach","item","elem","rect","getBoundingClientRect","wHeight","innerHeight","documentElement","clientHeight","wWidth","innerWidth","clientWidth","bottom","offsetHeight","right","visChecker","swiperDirections","Swiper","loop","spaceBetween","slidesPerView","speed","mousewheel","grabCursor","keyboard","simulateTouch","allowSwipeToNext","allowSwipeToPrev","navigation","nextEl","prevEl","breakpoints","767","992","1365","swiperIprod","centeredSlides","autoplay","delay","pagination","clickable","on","_this","setTimeout","params","$el","swiperIhead","pauseMainBgSliderVideos","activeSlide","activeVideo","iheadVideos","video","hasAttribute","clearTimeout","getAttribute","removeAttribute","pause","isEqualNode","play","id","isNaN","currentTime","setAttribute","effect","fadeEffect","crossFade","_toConsumableArray","slides","activeIndex","slideChange","eventScroll","Event","createEvent","initEvent","dispatchEvent"],"mappings":"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","file":"own.js","sourcesContent":["\"use strict\";\n\nfunction qs(query, root = document) {\n  return root.querySelector(query);\n}\n\nfunction qsAll(query, root = document) {\n  return root.querySelectorAll(query);\n}\n\nfunction getParent(el, findParent) {\n  while (el && el.parentNode) {\n    el = el.parentNode;\n    if (el.classList && el.classList.contains(findParent)) return el;\n  }\n  return false;\n}\n\nwindow.onload = () => qs('body').classList.add('page-loaded');\n\nif (navigator.userAgent.match(/(iPod|iPhone|iPad)/)) qs('body').classList.add('ios');\n\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n\n  window.site = {};\n\n  window.site.form = {\n\n    init: function init() {\n      let _th = this,\n        forms = qsAll('form'),\n        fieldPhones = qsAll('.js-phone'),\n        formElems = qsAll('.form__field-input, .form__field-textarea');\n      for (let phoneItem of fieldPhones) {\n        $(phoneItem).mask('+7(999) 999-9999')\n      }\n      for (let formElem of formElems) {\n        if (formElem.value != '') {\n          formElem.classList.add('no-empty')\n        } else {\n          formElem.classList.remove('no-empty')\n        }\n        formElem.addEventListener('keyup', function () {\n          if (formElem.value != '') {\n            formElem.classList.add('no-empty')\n          } else {\n            formElem.classList.remove('no-empty')\n          }\n        });\n      }\n      for (let formItem of forms) {\n        formItem.addEventListener('submit', function (event) {\n          if (!_th.checkForm($(this))) event.preventDefault()\n        });\n      }\n      return this;\n    },\n\n    checkForm: function checkForm(form) {\n      let checkResult = true;\n      form.find('.warning').removeClass('warning');\n      form.find('input, textarea, select').each(function () {\n        if ($(this).data('req')) {\n          switch ($(this).data('type')) {\n            case 'tel':\n              var re = /^[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$/im;\n              if (!re.test($(this).val())) {\n                $(this).addClass('warning');\n                checkResult = false;\n              }\n              break;\n            case 'email':\n              var re = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\n              if (!re.test($(this).val())) {\n                $(this).addClass('warning');\n                checkResult = false;\n              }\n              break;\n            case 'checkbox_personal':\n              if (!$(this).is(':checked')) {\n                $(this).parents('.checkbox').addClass('warning');\n                checkResult = false;\n              }\n              break;\n            default:\n              if ($.trim($(this).val()) === '') {\n                $(this).addClass('warning');\n                checkResult = false;\n              }\n              break;\n          }\n        }\n      });\n      return checkResult;\n    }\n\n  }.init();\n\n  window.site.obj = {\n\n    fadeOut: function fadeOut(selector, duration, cb = null) {\n      if (!selector)\n        return;\n      let element,\n        op = 1;\n      if (typeof selector === 'string' || selector instanceof String) {\n        element = document.querySelector(selector);\n      } else {\n        element = selector;\n      }\n      let timer = setInterval(function () {\n        if (op <= 0.1) {\n          clearInterval(timer);\n          element.style.display = 'none';\n          if (cb) cb();\n        }\n        element.style.opacity = op;\n        element.style.filter = 'alpha(opacity=' + op * 100 + \")\";\n        op -= op * 0.1;\n      }, duration / 50 || 20);\n    },\n\n    fadeIn: function fadeIn(selector, duration, type, cb = null) {\n      if (!selector)\n        return;\n      let element,\n        op = 0.1,\n        typeBlock = type ? type : 'block';\n      if (typeof selector === 'string' || selector instanceof String) {\n        element = document.querySelector(selector);\n      } else {\n        element = selector;\n      }\n      element.style.opacity = 0;\n      element.style.display = typeBlock;\n      let timer = setInterval(function () {\n        if (op >= 1) {\n          clearInterval(timer);\n          if (cb) cb();\n        }\n        element.style.opacity = op;\n        element.style.filter = 'alpha(opacity=' + op * 100 + \")\";\n        op += op * 0.1;\n      }, duration / 50 || 20);\n    },\n\n    burger: function () {\n      let _th = this,\n        nav = qs('.nav');\n      qs('.js-burger').addEventListener('click', function () {\n        let _t = this;\n        if (!_t.classList.contains('header__burger--active')) {\n          _t.classList.add('header__burger--active');\n          qs('body').classList.add('blocekd');\n          _th.fadeIn('.nav', 300);\n        } else {\n          _t.classList.remove('header__burger--active');\n          qs('body').classList.remove('blocekd');\n          _th.fadeOut('.nav', 300);\n        }\n        return false;\n      });\n      qs('.js-close-nav').addEventListener('click', (e)=> {\n        qs('.header__burger').classList.remove('header__burger--active');\n        _th.fadeOut('.nav', 300);\n        e.preventDefault();\n      });\n    },\n\n    anim: function () {\n      let elemsAnimArr = ['.js-scroll-anim'];\n\n      function visChecker(el) {\n        const rect = el.getBoundingClientRect();\n        const wHeight = window.innerHeight || document.documentElement.clientHeight;\n        const wWidth = window.innerWidth || document.documentElement.clientWidth;\n        return (\n          rect.bottom - el.offsetHeight * 0.75 <= wHeight &&\n          rect.right <= wWidth\n        );\n      }\n\n      function elemVisCheck(elArray) {\n        window.addEventListener('scroll', () => {\n          if (elArray.length) {\n            elArray.forEach((item) => {\n              if (document.querySelectorAll(item).length) {\n                document.querySelectorAll(item).forEach((elem) => {\n                  if (visChecker(elem)) {\n                    elem.classList.add('start-animate');\n                  }\n                });\n              }\n            });\n          }\n        });\n      }\n\n      if (elemsAnimArr.length) {\n        elemVisCheck(elemsAnimArr);\n      }\n    },\n\n    swiperDirections: function () {\n      let directionsSwiper = new Swiper('.js-swiper-directions', {\n        loop: true,\n        spaceBetween: 12,\n        slidesPerView: 6,\n        speed: 500,\n        mousewheel: false,\n        grabCursor: false,\n        keyboard: false,\n        simulateTouch: false,\n        allowSwipeToNext: false,\n        allowSwipeToPrev: false,\n        navigation: {\n          nextEl: '.directions .swiper-button-next',\n          prevEl: '.directions .swiper-button-prev'\n        },\n        breakpoints: {\n          767: {\n            slidesPerView: 1\n          },\n          992: {\n            slidesPerView: 3\n          },\n          1365: {\n            slidesPerView: 5\n          },\n        }\n      });\n    },\n\n    swiperIprod: function () {\n\n      let iprodSwiper = new Swiper('.js-swiper-iprod', {\n        loop: false,\n        spaceBetween: 32,\n        slidesPerView: 'auto',\n        centeredSlides: true,\n        speed: 1500,\n        autoplay: {\n          delay: 7000,\n        },\n        navigation: {\n          nextEl: '.iprod .swiper-button-next',\n          prevEl: '.iprod .swiper-button-prev'\n        },\n        pagination: {\n          el: '.iprod .swiper-pagination',\n          clickable: true,\n        },\n        on: {\n          init: function () {\n            setTimeout(() => {\n              this.params.autoplay.delay = 10000;\n            }, 15100);\n            setTimeout(() => {\n              this.$el[0].classList.add('start-anim');\n            }, 200);\n          },\n        },\n        breakpoints: {\n          767: {\n            spaceBetween: 8,\n          }\n        },\n      });\n\n    },\n\n    swiperIhead: function () {\n\n      let iheadVideos,\n        iheadSliderSpeed = 1500;\n\n      const pauseMainBgSliderVideos = (activeSlide) => {\n        let activeVideo = activeSlide.querySelector('video');\n        if (iheadVideos && iheadVideos.length)\n          iheadVideos.forEach((video) => {\n            if (video.hasAttribute('data-stid')){\n              clearTimeout(video.getAttribute('data-stid'));\n              video.removeAttribute('data-stid');\n            }\n            video.pause();\n            if (!activeVideo.isEqualNode(video)) {\n              let id = setTimeout(() => {\n                if (!isNaN(video.duration))\n                  video.currentTime = 0;\n                  video.removeAttribute('data-stid');\n              }, iheadSliderSpeed);\n              video.setAttribute('data-stid', id);\n            } else {\n              activeVideo.play();\n            }\n          });\n      };\n\n      let iheadSwiper = new Swiper('.js-swiper-ihead', {\n        loop: true,\n        spaceBetween: 0,\n        slidesPerView: 1,\n        effect: 'fade',\n        fadeEffect: {\n          crossFade: true\n        },\n        autoplay: {\n          delay: 10000,\n        },\n        speed: iheadSliderSpeed,\n        navigation: {\n          nextEl: '.ihead .swiper-button-next',\n          prevEl: '.ihead .swiper-button-prev'\n        },\n        on: {\n          init: function () {\n            iheadVideos = [...qsAll('.ihead video')];\n            let activeSlide = this.slides[this.activeIndex];\n            pauseMainBgSliderVideos(activeSlide);\n          },\n          slideChange: function () {\n            let activeSlide = this.slides[this.activeIndex];\n            pauseMainBgSliderVideos(activeSlide);\n          },\n        }\n      });\n\n    },\n\n    init: function init() {\n\n      let _self = this,\n        elemsAnimArr = ['.js-scroll-anim'];\n\n      if (elemsAnimArr.length) this.anim();\n\n      if (qs('.js-swiper-ihead')) this.swiperIhead();\n\n      if (qs('.js-swiper-iprod')) this.swiperIprod();\n\n      let eventScroll\n      try {\n        eventScroll = new Event('scroll')\n      } catch (e) {\n        eventScroll = document.createEvent('Event');\n        eventScroll.initEvent('scroll', false, false);\n      }\n      window.dispatchEvent(eventScroll)\n\n      return this;\n    }\n\n  }.init();\n\n});\n\n"]}